### **1. Linux Operating System Architecture**

Think of the OS as a layered cake. You (the user) are at the top, and the physical computer hardware is at the bottom.

- **Hardware üíª:** The physical parts of the computer (CPU, RAM, Hard Drive).
    
- **Kernel üß†:** The core of the operating system. It has complete control over everything in the system. It talks directly to the hardware.
    
- **Shell üêö:** The interface between the user and the Kernel. It takes your commands (like `ls` or `cp`), interprets them, and passes them to the Kernel to execute.
    
- **Applications/Utilities üõ†Ô∏è:** Programs that run on top of the shell (e.g., Web Browsers, Text Editors, Compilers).
    
![[Pasted image 20260204232429.jpg]]
### **2. The Kernel**

The Kernel is the most important part of Linux. Its main jobs are:

- **Memory Management:**¬†Tracks memory usage and allocation.
- **Process Management:**¬†Schedules processes on the CPU and determines their execution order.
- **Device Drivers:**¬†Acts as an intermediary between hardware devices and software processes.
- **System Calls and Security:**¬†Handles requests from processes and enforces security policies.
![[Pasted image 20260204232455.jpg]]

## Understanding Kernel and User Space

A fundamental function of the Linux Kernel is managing memory, which is divided into two primary areas: kernel space and user space (also known as kernel mode and user mode, respectively).

Kernel Space

- **Kernel Space:**¬†Reserved exclusively for the kernel‚Äôs execution and its critical services. Processes operating in kernel space have complete access to the system‚Äôs hardware resources.
User Space

- **User Space:**¬†Dedicated to processes running outside the kernel, with restricted access to hardware resources. This area hosts various utilities, programming languages, and graphical tools collectively known as the userland
**User space programs** primarily work with data by performing operations on memory or disk. 
- They communicate their needs through system calls to the kernel. For instance, when a program accesses the¬†`/etc/os-release`¬†file to determine the operating system version, it makes a system call to request the file‚Äôs contents:
![[Pasted image 20260204232842.jpg]]
 
 # **Working with Hardware**
![[Pasted image 20260204232950.jpg]]

**1. The Trigger (Hardware)**

You plug in the USB drive. The Linux **Kernel** notices the new hardware immediately.

**2. The Signal (uEvent)**

The Kernel sends out a notification called a **uEvent** to say, "Hey, something new just arrived!"

**3. The Worker (uDev)**

A background program called **uDev** hears this signal. It acts like a receptionist.

**4. The Result (Device Node)**

uDev instantly creates a specific file in the `/dev` folder (e.g., `/dev/sdb`). This file is the bridge that allows you and your programs to actually talk to the USB drive.

**Summary:**

**Plug in USB** $\rightarrow$ **Kernel alerts uDev** $\rightarrow$ **uDev creates file in `/dev`** $\rightarrow$ **Ready to use.**

# **Viewing Kernel and Device Events**
### **`dmesg`: The Kernel's Logbook**

- **What it does:** Displays messages from the **Kernel Ring Buffer**. This is where the kernel writes down everything it does, especially during system boot (startup).
    
- **Use case:** Troubleshooting hardware issues. If a USB drive isn't working, `dmesg` will tell you if the kernel saw it or if there was an error.
    
- **How to use it:**
    
    - `dmesg | less`: Scroll through the logs easily.
        
    - `dmesg | grep "usb"`: Search specifically for USB-related messages.
        

---

### **2. `udevadm`: The Device Manager Tool**

This tool allows you to talk to **uDev** (the background worker that manages devices) to get info or watch for changes.

#### **A. Querying Device Info**

- **Command:** `udevadm info`
    
- **What it does:** Asks the uDev database for technical details about a specific device.
    
- **Example:**
    
    Bash
    
    ```
    udevadm info --query=path --name=/dev/sda5
    ```
    
    _Returns the specific internal path for partition 5 on the first hard drive._
    

#### **B. Monitoring Live Events**

- **Command:** `udevadm monitor`
    
- **What it does:** Watches for hardware changes in **real-time**. If you run this and then plug in a mouse, you will see the events scroll by on the screen.
    
- **Output Types:**
    
    - `KERNEL`: The raw signal from the kernel ("I see a new device").
        
    - `UDEV`: The signal from uDev after it has processed the rules ("I have set up the device node").
        

---

## Listing PCI Devices

The¬†`lspci`¬†command lists all PCI devices configured in your system, such as Ethernet cards, RAID controllers, video cards, and wireless adapters. 
- **PCI** stands for **Peripheral Component Interconnect**
Below is an example output from the¬†`lspci`¬†command:

``` bash
[~]$ lspci
00:00.0 Host bridge: Intel Corporation Device 3e34 (rev 0c)
00:02.0 VGA compatible controller: Intel Corporation Device 3ea0 (rev 02)
00:08.0 System peripheral: Intel Corporation Xeon E3-1200 v5/v6 / E3-1500 v5 / 6th/7th Gen Core Processor Gaussian Mixture Model
00:12.0 Signal processing controller: Intel Corporation Device 9df9 (rev 30)
00:14.0 USB controller: Intel Corporation Device 9ded (rev 30)
00:14.2 RAM memory: Intel Corporation Device 9def (rev 30)
00:14.3 Network controller: Intel Corporation Device 9df0 (rev 30)
00:15.0 Serial bus controller [0c80]: Intel Corporation Device 9de8 (rev 30)
00:15.1 Serial bus controller [0c80]: Intel Corporation Device 9de9 (rev 30)
00:16.0 Communication controller: Intel Corporation Device 9de0 (rev 30)
00:17.0 RAID bus controller: Intel Corporation 82801 Mobile SATA Controller [RAID mode] (rev 30)
00:1c.0 PCI bridge: Intel Corporation Device 9db0 (rev f0)
00:1f.0 ISA bridge: Intel Corporation Device 9dab (rev 30)
00:1f.3 Audio device: Intel Corporation Device 9dc8 (rev 30)
00:1f.5 Serial bus controller [0c80]: Intel Corporation Device 9dad (rev 30)
01:00.0 Unassigned class [ff00]: Realtek Semiconductor Co., Ltd. RTL8411B PCI Express Card Reader (rev 01)
01:00.1 Ethernet controller: Realtek Semiconductor Co., Ltd. RTL8111/8168/8411 PCI Express Gigabit Ethernet Controller (rev 12)
```

## Viewing Block Devices

The¬†`lsblk`¬†command provides detailed information about block devices present on your system. 
- It displays the physical disk (e.g., sda) along with its partitions (e.g., sda1 to sda5).
- The term **‚Äúdisk‚Äù** refers to the entire physical disk, while each **‚Äúpartition‚Äù** is a section of that disk. 
- Devices are also linked with major and minor numbers‚Äîwhere the major number signifies the device driver type (for example, the number 8 indicates a block disk device)
- the minor number distinguishes between individual devices handled by the same driver.
- Example output from the¬†`lsblk`¬†command:

``` bash
[~]$ lsblk
NAME   MAJ:MIN RM   SIZE RO TYPE MOUNTPOINT
sda    8:0    0 119.2G 0 disk 
‚îú‚îÄsda1 8:1    0   100M 0 part /boot/efi
‚îú‚îÄsda2 8:2    0    16M 0 part 
‚îú‚îÄsda3 8:3    0  71.5G 0 part 
‚îú‚îÄsda4 8:4    0    1G 0 part 
‚îî‚îÄsda5 8:5    0  46.6G 0 part /
```

## Displaying CPU Information

The¬†`lscpu`¬†command offers detailed insights into the CPU architecture, such as the number of cores, threads per core, cache sizes, and more.
- For instance, the output below illustrates a 64-bit processor with one physical CPU socket, four cores per socket, and two threads per core‚Äîresulting in a total of 8 virtual CPUs:

``` bash
[~]$ lscpu
Architecture:          x86_64
CPU op-mode(s):        32-bit, 64-bit
Byte Order:            Little Endian
CPU(s):                8
On-line CPU(s) list:   0-7
Thread(s) per core:    2
Core(s) per socket:    4
Socket(s):             1
NUMA node(s):          1
Vendor ID:             GenuineIntel
CPU family:            6
Model:                 142
Model name:            Intel(R) Core(TM) i5-8265U CPU @ 1.60GHz
Stepping:              12
CPU MHz:               700.060
CPU max MHz:           3900.0000
CPU min MHz:           400.0000
BogoMIPS:              3600.00
Virtualization:        VT-x
L1d cache:             32K
L1i cache:             32K
L2 cache:              256K
L3 cache:              6144K
NUMA node0 CPU(s):     0-7
```

Key points from the output include:

- The **CPU** architecture is 64-bit.
- There is 1 socket with 4 cores each and 2 threads per core, totaling 8 virtual CPUs.
## Displaying Memory Information

To retrieve memory configuration details, use the¬†`lsmem`¬†command. When combined with the¬†`--summary`¬†flag, it delivers a brief overview of the system‚Äôs memory:

```
[~]$ lsmem --summary
Memory block size: 128M
Total online memory: 8G
Total offline memory: 0B
```

## Extracting Detailed Hardware Information

The¬†`lshw`¬†command extracts comprehensive details about the system‚Äôs hardware configuration. This includes memory setup, firmware version, motherboard information, CPU, cache settings, and bus speeds. Note that running¬†`lshw`¬†without root privileges may generate warnings about incomplete or inaccurate output.

To run¬†`lshw`¬†with elevated privileges, use¬†`sudo`:

```
[~]$ sudo lshw
[sudo] password for bob:
  description: Notebook
  product: Aspire A515-52 (0000000000000000)
  vendor: Acer
  version: V1.12
  serial: NXH89AA0026262680A13400
  width: 64 bits
  capabilities: smbios-3.0 dmi-3.0 smp vsyscall32
  configuration: chassis=notebook family=Aspire 5 sku=0000000000000000 uuid=D74676912-9EFF-ABCD-8192-085643E554D
*-core
     description: Motherboard
     product: Raticate_WL
     vendor: WL
     physical id: 0
     version: V1.12
     serial: LAC2110069561AB521500
     slot: Type2 - Board Chassis Location
*-firmware
     description: BIOS
     vendor: Insyde Corp.
     physical id: 0
     version: V1.12
     date: 04/26/2019
     size: 128KiB
     capacity: 15MiB
```
### **Summary Table**

| **Tool**      | **Focus**                       | **Best For**                                                                                                                                                                                                 |
| ------------- | ------------------------------- | ------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------ |
| **`dmesg`**   | **Past** / Logs                 | Checking boot errors or why a device failed earlier.                                                                                                                                                         |
| **`udevadm`** | **Present** / Management        | Seeing live connection events or specific device properties.                                                                                                                                                 |
| **`lspci`**   | Lists PCI Devices               | Lists all PCI devices representing devices directly attached to the motherboard.                                                                                                                             |
| **`lsblk`**   | information about block devices | It displays the physical disk (e.g., sda) along with its partitions (e.g., sda1 to sda5).<br>- The term **‚Äúdisk‚Äù** refers to the entire physical disk, while each **‚Äúpartition‚Äù** is a section of that disk. |
| **`lscpu`**   | CPU Details                     | insights into the CPU architecture, such as the number of cores, threads per core, cache sizes, and more.                                                                                                    |
| **`lsmem`**   | Memory details                  | combined with the¬†`--summary`¬†flag, it delivers a brief overview of the system‚Äôs memory                                                                                                                      |
